enable_language(ASM_NASM)

file(GLOB dirs LIST_DIRECTORIES true ./*)
foreach (dir ${dirs})
    if (NOT IS_DIRECTORY ${dir})
        continue()
    endif ()
    file(GLOB files ${dir}/*)
    if (NOT files)
        continue()
    endif ()
    get_filename_component(dir ${dir} NAME)
    add_project(extdll_${dir} SHARED ${files} LANGUAGES C FOLDER extdlls OUTPUT_SUBDIR dll NO_PREFIX OUTPUT_NAME ${dir})
    target_include_directories(extdll_${dir} PRIVATE ..)
    target_link_libraries(extdll_${dir} PRIVATE inih shlwapi)
endforeach ()
